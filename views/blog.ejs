<!DOCTYPE html>
<html lang="en">

<head>

    <%- include('./partials/head') %>
        <title>Blog</title>
</head>

<body>
    <%- include('./partials/nav') %>
        <div class="container mt-5">
            <h1 class="display-4 fw-bold mb-4">
                <%= blog.title%>
            </h1>
            <div class="text-center mb-4">
                <img src="<%= blog.coverImageURL %>" alt="" class="img-fluid rounded shadow-lg"
                    style="max-height: 500px; width: auto;">
            </div>
            <div class="fs-5 lh-lg my-4 text-light">
                <%= blog.body %>
            </div>
        </div>

        <div class="container mb-5 d-flex align-items-center">
            <img src="<%= blog.createdBy.profileImageURL %>" class="rounded-circle border border-primary me-3"
                width="50px" height="50px" style="object-fit: cover;" alt="">
            <span class="fs-5 text-primary fw-semibold">
                <%= blog.createdBy.fullName %>
            </span>

            <%= blog.createdBy.fullName %>
        </div>


        <div class="container mt-4 bg-dark p-4 rounded border border-secondary shadow-sm">
            <% if (locals.user) { %>
                <h3 class="mb-4">Comments (<%= comments.length %>)</h3>
                <form action="/blog/comment/<%= blog._id %>" method="post">

                    <div class="mb-3">
                        <input type="text" name="content"
                            class="form-control form-control-lg bg-dark text-light border-secondary"
                            placeholder="Share your thoughts...">
                    </div>

                    <button type="submit" class="btn btn-primary px-4 py-2">Post Comment</button>

                </form>

                <% } else { %>
                    <div class="alert alert-info text-center">
                        Please <a href="/user/signin" class="text-primary fw-bold text-decoration-none">SignIn</a> to
                        post a comment.
                    </div>
                    <% } %>

                        <div class="mt-3">
                            <% comments.forEach(comment=> { %>
                                <div>
                                    <img src="<%= comment.createdBy.profileImageURL %>" width="50px" alt="">
                                    <%= comment.createdBy.fullName %>:
                                        <pre><%= comment.content %></pre>
                                </div>
                                <% }) %>
                        </div>
        </div>

        <%- include('./partials/scripts') %>

</body>

</html>